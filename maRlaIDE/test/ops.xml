<?xml version="1.0" encoding="UTF-8" ?>
<operations>
	<operation name="NOP" list="false">
		<!-- This operation is used for testing. It does nothing except print
			that it was encountered -->
		<computation>
			<cmd>print("NOP happened")</cmd>
		</computation>
	</operation>

	<operation name="Histogram" category="Plots" plot="true">
		<query type="column" name="col" prompt="Column?" />

		<displayname>hist(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="x" use="values" />

			<plot>
				<cmd>hist(x)</cmd>
			</plot>
		</computation>
	</operation>

	<operation name="Boxplot" category="Plots" plot="true">
		<query type="column" name="col" prompt="Column?" />

		<displayname>boxplot(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="x" use="values" />

			<plot>
				<cmd>boxplot(x)</cmd>
			</plot>
		</computation>
	</operation>

	<operation name="Q-Q Norm" category="Plots" plot="true">
		<query type="column" name="col" prompt="Column?" />

		<displayname>qqnorm(<response name="col" default="x" />)</displayname>
		<description>
			Creates a QQ normality plot to help determine if the selected
			data column is normal.
		</description>

		<computation>
			<set name="col" rvar="x" use="values" />

			<plot>
				<cmd>qqnorm(x)</cmd>
			</plot>
		</computation>
	</operation>

	<operation name="Q-Q Line" category="Plots" plot="true">
		<query type="column" name="col" prompt="Column?" />

		<displayname>qqline(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="x" use="values" />

			<plot>
				<cmd>qqnorm(x)</cmd>
				<cmd>qqline(x)</cmd>
			</plot>
		</computation>
	</operation>

	<operation name="Q-Q Plot" category="Plots" plot="true">
		<query type="column" name="x" prompt="Column 1" />
		<query type="column" name="y" prompt="Column 2" />

		<displayname>qqplot(<response name="x" default="x" />, <response name="y" default="y" />)</displayname>

		<computation>
			<set name="x" rvar="x" use="values" />
			<set name="y" rvar="y" use="values" />

			<plot>
				<cmd>qqplot(x, y)</cmd>
			</plot>
		</computation>
	</operation>

	<operation name="Average" category="Basic Statistics" list="false">
		<query type="column" name="x" prompt="Column" />

		<displayname>ave(<response name="x" default="col" />)</displayname>

		<computation>
			<set name="x" rvar="x" use="values" />

			<error msg="TBD. Need to work with factors for this" />
		</computation>
	</operation>

	<operation name="Barplot" category="Plots" plot="true">
		<query type="column" name="col" prompt="Column?" />

		<displayname>barplot(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="x" use="values" />

			<plot>
				<cmd>barplot(x)</cmd>
			</plot>
		</computation>
	</operation>

	<operation name="Dot Chart" category="Plots" plot="true">
		<query type="column" name="col" prompt="Column?" />

		<displayname>dotchart(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="x" use="values" />

			<plot>
				<cmd>dotchart(x)</cmd>
			</plot>
		</computation>
	</operation>

	<operation name="Strip Chart" category="Plots" plot="true">
		<query type="column" name="col" prompt="Column?" />

		<displayname>stripchart(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="x" use="values" />

			<plot>
				<cmd>stripchart(x)</cmd>
			</plot>
		</computation>
	</operation>

	<operation name="Divide" category="Basic Math">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />
		<query type="numeric" name="val" prompt="Divide by" />

		<displayname><response name="col" default="column" /> / <response name="val" default="X" /></displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />
			<set name="val" rvar="val" />

			<save type="numeric" r_column="paste(colName, val, sep=' / ')">colVals / val</save>
		</computation>
	</operation>

	<operation name="Multiply" category="Basic Math">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />
		<query type="numeric" name="val" prompt="Multiply by" />

		<displayname><response name="col" default="column" /> * <response name="val" default="X" /></displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />
			<set name="val" rvar="val" />

			<save type="numeric" r_column="paste(colName, val, sep=' * ')">colVals * val</save>
		</computation>
	</operation>

	<operation name="Add" category="Basic Math">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />
		<query type="numeric" name="val" prompt="Add" />

		<displayname><response name="col" default="column" /> + <response name="val" default="X" /></displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />
			<set name="val" rvar="val" />

			<save type="numeric" r_column="paste(colName, val, sep=' + ')">colVals + val</save>
		</computation>
	</operation>

	<operation name="Subtract" category="Basic Math">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />
		<query type="numeric" name="val" prompt="Subtract" />

		<displayname><response name="col" default="column" /> - <response name="val" default="X" /></displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />
			<set name="val" rvar="val" />

			<save type="numeric" r_column="paste(colName, val, sep=' - ')">colVals - val</save>
		</computation>
	</operation>

	<operation name="Exponentiate" category="Basic Math">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />
		<query type="numeric" name="val" prompt="Raise by" />

		<displayname><response name="col" default="col" />&lt;sup&gt;<response name="val" default="X" />&lt;/sup&gt;</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />
			<set name="val" rvar="val" />

			<save type="numeric" r_column="paste(colName, val, sep=' ^ ')">colVals ^ val</save>
		</computation>
	</operation>

	<operation name="sin()" category="Trig">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>sin(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('sin(', colName, ')', sep='')">sin(colVals)</save>
		</computation>
	</operation>

	<operation name="cos()" category="Trig">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>cos(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('cos(', colName, ')', sep='')">cos(colVals)</save>
		</computation>
	</operation>

	<operation name="tan()" category="Trig">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>tan(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('tan(', colName, ')', sep='')">tan(colVals)</save>
		</computation>
	</operation>

	<operation name="asin()" category="Trig">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>asin(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('asin(', colName, ')', sep='')">asin(colVals)</save>
		</computation>
	</operation>

	<operation name="acos()" category="Trig">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>acos(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('acos(', colName, ')', sep='')">acos(colVals)</save>
		</computation>
	</operation>

	<operation name="atan()" category="Trig">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>atan(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('atan(', colName, ')', sep='')">atan(colVals)</save>
		</computation>
	</operation>

	<operation name="atan2()" category="Trig">
		<query type="column" name="x" prompt="X Column" column_type="numeric" />
		<query type="column" name="y" prompt="Y Column" column_type="numeric" />

		<displayname>atan2(<response name="y" default="Y" />, <response name="x" default="X" />)</displayname>

		<computation>
			<set name="x" rvar="xColName" use="name" />
			<set name="y" rvar="yColName" use="name" />
			<set name="x" rvar="x" use="values" />
			<set name="y" rvar="y" use="values" />

			<save type="numeric" r_column="paste('atan2(', yColName, ', ',  xColName, ')')">atan2(y, x)</save>
		</computation>
	</operation>

	<operation name="Natural Log" category="Basic Math">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>ln(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('log(', colName, ')', sep='')">log(colVals)</save>
		</computation>
	</operation>

	<operation name="1-Var variance" category="Basic Analysis">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>var(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('var(', colName, ')', sep='')">var(colVals)</save>
		</computation>
	</operation>

	<operation name="2-Var variance" category="Basic Analysis">
		<query type="column" name="x" prompt="X" column_type="numeric" />
		<query type="column" name="y" prompt="Y" column_type="numeric" />

		<displayname>var(<response name="x" default="x" />, <response name="y" default="y" />)</displayname>

		<computation>
			<set name="x" rvar="xName" use="name" />
			<set name="y" rvar="yName" use="name" />
			<set name="x" rvar="x" use="values" />
			<set name="y" rvar="y" use="values" />

			<save type="numeric" r_column="paste('var(', xName, ', ', yName, ')', sep='')">var(x, y)</save>
		</computation>
	</operation>

	<operation name="Correlation" category="Basic Analysis">
		<query type="column" name="x" prompt="Column 1" column_type="numeric" />
		<query type="column" name="y" prompt="Column 2" column_type="numeric" />

		<displayname>cor(<response name="x" default="x" />, <response name="y" default="y" />)</displayname>

		<computation>
			<set name="x" rvar="xName" use="name" />
			<set name="y" rvar="yName" use="name" />
			<set name="x" rvar="x" use="values" />
			<set name="y" rvar="y" use="values" />

			<save type="numeric" r_column="paste('cor(', xName, ', ', yName, ')', sep='')">cor(x, y)</save>
		</computation>
	</operation>

	<operation name="Log 10" category="Basic Math">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>log&lt;sub&gt;10&lt;/sub&gt;<response name="col" default="x" /></displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('log10(', colName, ')', sep='')">log10(colVals)</save>

			
		</computation>
	</operation>

	<operation name="Log base X" category="Basic Math">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />
		<query type="numeric" name="base" prompt="Base" />

		<displayname>log&lt;sub&gt;<response name="base" default="b" />&lt;/sub&gt;<response name="col" default="x" /></displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />
			<set name="base" rvar="base" />

			<save type="numeric" r_column="paste('log', base, '(', colName, ')', sep='')">log(colVals) / log(base)</save>
		</computation>
	</operation>

	<operation name="Exponential" category="Basic Math">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>e&lt;sup&gt;<response name="col" default="x" />&lt;/sup&gt;</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('e^', colName, sep='')">exp(colVals)</save>
		</computation>
	</operation>

	<operation name="Absolute Value" category="Basic Math">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>abs(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('abs(', colName, ')', sep='')">abs(colVals)</save>
		</computation>
	</operation>

	<operation name="t-test" category="Statistical Test">
		<query type="checkbox" prompt="Is your data normal?" name="normal" />
		
		<computation>
			<!-- Run t test on each column and save, plus prepare the top row -->
			<cmd>t = list()</cmd>
			<loop type="parent" value_var="col" key_var="colName" index_var="i">
				<if rvar="col" vartype="numeric">
					<then>
						<cmd>t[[i]] = t.test(col)</cmd>
						<save type="string" column="Column">colName</save>
					</then>
				</if>
			</loop>

			<!-- Save each -->
			<loop type="numeric" loop_var="1:length(t)" index_var="i">
				<save type="numeric" column="t">t[[i]]$statistic</save>
				<save type="numeric" column="DF">t[[i]]$parameter</save>
				<save type="numeric" column="P-Value">t[[i]]$p.value</save>
				<save type="numeric" column="Mean">t[[i]]$estimate</save>
				<save type="numeric" column="Lower CI">t[[i]]$conf.int[1]</save>
				<save type="numeric" column="Upper CI">t[[i]]$conf.int[2]</save>
				<save type="numeric" column="alpha">attr(t[[i]]$conf.int, 'conf.level')</save>
			</loop>
		</computation>
	</operation>

	<operation name="Mean" category="Basic Analysis">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>mean(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('mean(', colName, ')', sep='')">mean(colVals)</save>
		</computation>
	</operation>

	<operation name="StdDev" category="Basic Analysis">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>&#963;(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('sd(', colName, ')', sep='')">sd(colVals)</save>
		</computation>
	</operation>

	<operation name="Sum" category="Basic Analysis">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>&#8721;(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<save type="numeric" r_column="paste('sum(', colName, ')', sep='')">sum(colVals)</save>
		</computation>
	</operation>

	<operation name="Summary" category="Basic Analysis">
		<computation>
			<loop type="parent" key_var="colName" value_var="col">
				<cmd>s = summary(col)</cmd>
				<cmd>n = names(s)</cmd>
				<loop type="numeric" loop_var="s" index_var="i">
					<save type="numeric" r_column="paste(colName, n[i])">s[i]</save>
				</loop>
			</loop>
		</computation>
	</operation>

	<operation name="Five Nums" category="Basic Analysis">
		<query type="column" name="col" prompt="Column?" column_type="numeric" />

		<displayname>fivenum(<response name="col" default="x" />)</displayname>

		<computation>
			<set name="col" rvar="colName" use="name" />
			<set name="col" rvar="colVals" use="values" />

			<cmd>a = fivenum(colVals)</cmd>

			<save type="numeric" r_column="paste('min(', colName, ')', sep='')">a[1]</save>
			<save type="numeric" r_column="paste('Lower Hinge(', colName, ')', sep='')">a[2]</save>
			<save type="numeric" r_column="paste('median(', colName, ')', sep='')">a[3]</save>
			<save type="numeric" r_column="paste('Upper Hinge(', colName, ')', sep='')">a[4]</save>
			<save type="numeric" r_column="paste('max(', colName, ')', sep='')">a[5]</save>
		</computation>
	</operation>

	<operation name="rnorm" category="Data Creation">
		<query type="string" name="saveTo" prompt="Save to" />
		<query type="numeric" name="samples" prompt="Sample count" />
		<query type="numeric" name="mean" prompt="Mean" />

		<displayname>rnorm(<response name="samples" default="n" />, mean=<response name="mean" default="x" />)</displayname>

		<computation>
			<set name="saveTo" rvar="saveTo" />
			<set name="samples" rvar="n" />
			<set name="mean" rvar="m" />

			<save type="numeric" r_column="saveTo">rnorm(n, m)</save>
		</computation>
	</operation>

	<operation name="Binomial Test" category="Statistical Test">
		<query type="string" name="saveTo" prompt="Save to" />
		<query type="numeric" name="successes" prompt="Sucess Count" />
		<query type="numeric" name="trials" prompt="Trial Count" />
		<query type="numeric" name="alpha" prompt="Alpha" min="0" max="1" />

		<displayname>binom.test(<response name="successes" default="s" />, <response name="trials" default="n" />)</displayname>

		<computation>
			<set name="saveTo" rvar="saveTo" />
			<set name="successes" rvar="x" />
			<set name="trials" rvar="n" />
			<set name="alpha" rvar="a" />

			<!-- check arguments -->
			<if expr="n &lt; x">
				<then>
					<error msg="Trials must be greater than successes" />
				</then>
			</if>
			
			<cmd>res = binom.test(floor(x), floor(n), conf.level=1-a)</cmd>
			<save type="numeric" r_column="saveTo">res$estimate</save>
		</computation>
	</operation>

	<operation name="Proportionality Test" category="Statistical Test">
		<query type="string" name="saveTo" prompt="Save to" />
		<query type="column" name="successes" prompt="Sucess Counts" column_type="numeric" />
		<query type="column" name="trials" prompt="Trial Counts" column_type="numeric" />
		<query type="numeric" name="alpha" prompt="Alpha" min="0" max="1" />

		<displayname>prop.test(<response name="successes" default="successes" />, <response name="trials" default="trials" />)</displayname>

		<computation>
			<set name="saveTo" rvar="saveTo" />
			<set name="successes" rvar="x" use="values" />
			<set name="trials" rvar="n" use="values" />
			<set name="alpha" rvar="a" />

			<cmd>res = prop.test(floor(x), floor(n), conf.level=1-a)</cmd>
			<save type="numeric" r_column="saveTo">res$estimate</save>
		</computation>
	</operation>

	<operation name="Correlation Test" category="Statistical Test">
		<query type="string" name="saveTo" prompt="Save to" />
		<query type="column" name="x" prompt="Column 1" column_type="numeric" />
		<query type="column" name="y" prompt="Column 2" column_type="numeric" />
		<query type="numeric" name="alpha" prompt="Alpha" min="0" max="1" />

		<displayname>cor.test(<response name="x" default="col 1" />, <response name="y" default="col 2" />)</displayname>

		<computation>
			<set name="saveTo" rvar="saveTo" />
			<set name="x" rvar="x" use="values" />
			<set name="y" rvar="y" use="values" />
			<set name="alpha" rvar="a" />

			<cmd>res = cor.test(x, y, conf.level=1-a)</cmd>
			<save type="numeric" r_column="saveTo">res$estimate</save>
		</computation>
	</operation>

	<operation name="Shapiro-Wilk Normality Test" category="Statistical Test">
		<query type="string" name="saveTo" prompt="Save to" />
		<query type="column" name="x" prompt="Column" column_type="numeric" />

		<displayname>shapiro.test(<response name="x" default="col" />)</displayname>

		<computation>
			<set name="saveTo" rvar="saveTo" />
			<set name="x" rvar="x" use="values" />

			<cmd>res = shapiro.test(x)</cmd>
			<save type="numeric" r_column="saveTo">res$statistic</save>
		</computation>
	</operation>

	<operation name="Power T-Test" category="Statistical Test" list="false">
		<query type="string" name="saveTo" prompt="Save to" />
		<query type="column" name="x" prompt="Column 1" column_type="numeric" />
		<query type="column" name="y" prompt="Column 2" column_type="numeric" />
		<query type="numeric" name="alpha" prompt="Alpha" min="0" max="1" />

		<displayname>cor.test(<response name="x" default="col 1" />, <response name="y" default="col 2" />)</displayname>

		<computation>
			<error msg="Power T-Test: To be done" />
		</computation>
	</operation>

	<operation name="Power Prop Test" category="Statistical Test" list="false">
		<query type="string" name="saveTo" prompt="Save to" />
		<query type="column" name="x" prompt="Column 1" column_type="numeric" />
		<query type="column" name="y" prompt="Column 2" column_type="numeric" />
		<query type="numeric" name="alpha" prompt="Alpha" min="0" max="1" />

		<displayname>cor.test(<response name="x" default="col 1" />, <response name="y" default="col 2" />)</displayname>

		<computation>
			<error msg="Power Prop Test: To be done" />
		</computation>
	</operation>

	<operation name="XY Plot" category="Plots" plot="true">
		<query type="column" name="x" prompt="X column" column_type="numeric" />
		<query type="column" name="y" prompt="Y column" column_type="numeric" />

		<displayname>Plot of <response name="x" default="X" /> vs <response name="y" default="Y" /></displayname>

		<computation>
			<set rvar="x" name="x" />
			<set rvar="y" name="y" />

			<plot>
				<cmd>plot(x,y)</cmd>
			</plot>
		</computation>
	</operation>

	<operation name="Single Var Plot" category="Plots" plot="true">
		<query type="column" name="x" prompt="Column" column_type="numeric" />

		<displayname>Plot of <response name="x" default="x" /></displayname>

		<computation>
			<set rvar="x" name="x" />

			<plot>
				<cmd>plot(x)</cmd>
			</plot>
		</computation>
	</operation>

	<operation name="Sequence" category="Data Creation">
		<query type="string" name="colName" prompt="Column Name" />
		<query type="numeric" name="start" prompt="From" />
		<query type="numeric" name="end" prompt="To" />

		<displayname>seq(<response name="start" default="from" />, <response name="end" default="to" />)</displayname>

		<computation>
			<set rvar="col" name="colName" />
			<set rvar="start" name="start" />
			<set rvar="end" name="end" />

			<save type="numeric" r_column="col">seq(start, end)</save>
		</computation>
	</operation>

	<operation name="Repeat" category="Data Creation">
		<query type="string" name="colName" prompt="Column Name" />
		<query type="numeric" name="val" prompt="Value" />
		<query type="numeric" name="count" prompt="Count" />

		<displayname>rep(<response name="val" default="val" />, <response name="count" default="count" />)</displayname>

		<computation>
			<set rvar="col" name="colName" />
			<set rvar="val" name="val" />
			<set rvar="count" name="count" />

			<save type="numeric" r_column="col">rep(val, count)</save>
		</computation>
	</operation>

	<operation name="Median" category="Basic Analysis">
		<query type="column" name="colName" prompt="Column" column_type="numeric" />

		<displayname>median(<response name="colName" default="x" />)</displayname>

		<computation>
			<set rvar="colName" name="colName" use="name" />
			<set rvar="colVals" name="colName" use="values" />

			<save type="numeric" r_column="paste('median(', colName, ')', sep='')">median(colVals)</save>
		</computation>
	</operation>

	<operation name="Max" category="Basic Analysis">
		<query type="column" name="colName" prompt="Column" column_type="numeric" />

		<displayname>max(<response name="colName" default="x" />)</displayname>

		<computation>
			<set rvar="colName" name="colName" use="name" />
			<set rvar="colVals" name="colName" use="values" />

			<save type="numeric" r_column="paste('max(', colName, ')', sep='')">max(colVals)</save>
		</computation>
	</operation>

	<operation name="Min" category="Basic Analysis">
		<query type="column" name="colName" prompt="Column" column_type="numeric" />

		<displayname>min(<response name="colName" default="x" />)</displayname>

		<computation>
			<set rvar="colName" name="colName" use="name" />
			<set rvar="colVals" name="colName" use="values" />

			<save type="numeric" r_column="paste('min(', colName, ')', sep='')">min(colVals)</save>
		</computation>
	</operation>

	<operation name="Sort" category="Basic Analysis">
		<query type="column" name="colName" prompt="Column" />
		<query type="checkbox" name="desc" prompt="Descending" />

		<displayname>sort(<response name="colName" default="x" />)</displayname>

		<computation>
			<set rvar="colName" name="colName" use="name" />
			<set rvar="colVals" name="colName" use="values" />
			<set rvar="desc" name="desc" />

			<if expr="!desc">
				<then>
					<save type="numeric" r_column="paste('sort(', colName, ')', sep='')">sort(colVals)</save>
				</then>
				<else>
					<save type="numeric" r_column="paste('sort(', colName, ')', sep='')">sort(colVals, decreasing=T)</save>
				</else>
			</if>
		</computation>
	</operation>

	<operation name="Reverse" category="Basic Analysis">
		<query type="column" name="colName" prompt="Column" />

		<displayname>rev(<response name="colName" default="x" />)</displayname>

		<computation>
			<set rvar="colName" name="colName" use="name" />
			<set rvar="colVals" name="colName" use="values" />

			<save type="numeric" r_column="paste('rev(', colName, ')', sep='')">rev(colVals)</save>
		</computation>
	</operation>

	<operation name="Prod" category="Basic Analysis">
		<query type="column" name="colName" prompt="Column" />

		<displayname>prod(<response name="colName" default="x" />)</displayname>

		<computation>
			<set rvar="colName" name="colName" use="name" />
			<set rvar="colVals" name="colName" use="values" />

			<save type="numeric" r_column="paste('prod(', colName, ')', sep='')">prod(colVals)</save>
		</computation>
	</operation>

	<operation name="Load library" category="Utility" list="false">
		<query type="string" name="lib" prompt="Library name" />

		<displayname>Load <response name="lib" default="lib" /></displayname>

		<computation>
			<set rvar="lib" name="lib" />
			<load r_library="lib" />
		</computation>
	</operation>
</operations>

